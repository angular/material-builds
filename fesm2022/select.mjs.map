{"version":3,"file":"select.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/material/select/select-errors.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/material/select/select.ts","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/material/select/select.html","../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/material/select/select-module.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\n// Note that these have been copied over verbatim from\n// `material/select` so that we don't have to expose them publicly.\n\n/**\n * Returns an exception to be thrown when attempting to change a select's `multiple` option\n * after initialization.\n * @docs-private\n */\nexport function getMatSelectDynamicMultipleError(): Error {\n  return Error('Cannot change `multiple` mode of select after initialization.');\n}\n\n/**\n * Returns an exception to be thrown when attempting to assign a non-array value to a select\n * in `multiple` mode. Note that `undefined` and `null` are still valid values to allow for\n * resetting the value.\n * @docs-private\n */\nexport function getMatSelectNonArrayValueError(): Error {\n  return Error('Value must be an array in multiple-selection mode.');\n}\n\n/**\n * Returns an exception to be thrown when assigning a non-function value to the comparator\n * used to determine if a value corresponds to an option. Note that whether the function\n * actually takes two values and returns a boolean is not checked.\n */\nexport function getMatSelectNonFunctionValueError(): Error {\n  return Error('`compareWith` must be a function.');\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  _IdGenerator,\n  ActiveDescendantKeyManager,\n  addAriaReferencedId,\n  LiveAnnouncer,\n  removeAriaReferencedId,\n} from '@angular/cdk/a11y';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {SelectionModel} from '@angular/cdk/collections';\nimport {\n  A,\n  DOWN_ARROW,\n  ENTER,\n  ESCAPE,\n  hasModifierKey,\n  LEFT_ARROW,\n  RIGHT_ARROW,\n  SPACE,\n  UP_ARROW,\n} from '@angular/cdk/keycodes';\nimport {\n  CdkConnectedOverlay,\n  CdkOverlayOrigin,\n  ConnectedPosition,\n  createRepositionScrollStrategy,\n  ScrollStrategy,\n} from '@angular/cdk/overlay';\nimport {ViewportRuler} from '@angular/cdk/scrolling';\nimport {\n  AfterContentInit,\n  booleanAttribute,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  ContentChildren,\n  Directive,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  inject,\n  InjectionToken,\n  Input,\n  numberAttribute,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  SimpleChanges,\n  ViewChild,\n  ViewEncapsulation,\n  HostAttributeToken,\n  Renderer2,\n  Injector,\n  signal,\n} from '@angular/core';\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  FormGroupDirective,\n  NgControl,\n  NgForm,\n  Validators,\n} from '@angular/forms';\nimport {_getEventTarget} from '@angular/cdk/platform';\nimport {\n  _animationsDisabled,\n  _countGroupLabelsBeforeOption,\n  _ErrorStateTracker,\n  _getOptionScrollPosition,\n  ErrorStateMatcher,\n  MAT_OPTGROUP,\n  MAT_OPTION_PARENT_COMPONENT,\n  MatOptgroup,\n  MatOption,\n  MatOptionSelectionChange,\n} from '../core';\nimport {MAT_FORM_FIELD, MatFormField, MatFormFieldControl} from '../form-field';\nimport {defer, merge, Observable, Subject} from 'rxjs';\nimport {filter, map, startWith, switchMap, take, takeUntil} from 'rxjs/operators';\nimport {\n  getMatSelectDynamicMultipleError,\n  getMatSelectNonArrayValueError,\n  getMatSelectNonFunctionValueError,\n} from './select-errors';\nimport {NgClass} from '@angular/common';\n\n/** Injection token that determines the scroll handling while a select is open. */\nexport const MAT_SELECT_SCROLL_STRATEGY = new InjectionToken<() => ScrollStrategy>(\n  'mat-select-scroll-strategy',\n  {\n    providedIn: 'root',\n    factory: () => {\n      const injector = inject(Injector);\n      return () => createRepositionScrollStrategy(injector);\n    },\n  },\n);\n\n/** Object that can be used to configure the default options for the select module. */\nexport interface MatSelectConfig {\n  /** Whether option centering should be disabled. */\n  disableOptionCentering?: boolean;\n\n  /** Time to wait in milliseconds after the last keystroke before moving focus to an item. */\n  typeaheadDebounceInterval?: number;\n\n  /** Class or list of classes to be applied to the menu's overlay panel. */\n  overlayPanelClass?: string | string[];\n\n  /** Whether icon indicators should be hidden for single-selection. */\n  hideSingleSelectionIndicator?: boolean;\n\n  /**\n   * Width of the panel. If set to `auto`, the panel will match the trigger width.\n   * If set to null or an empty string, the panel will grow to match the longest option's text.\n   */\n  panelWidth?: string | number | null;\n\n  /**\n   * Whether nullable options can be selected by default.\n   * See `MatSelect.canSelectNullableOptions` for more information.\n   */\n  canSelectNullableOptions?: boolean;\n}\n\n/** Injection token that can be used to provide the default options the select module. */\nexport const MAT_SELECT_CONFIG = new InjectionToken<MatSelectConfig>('MAT_SELECT_CONFIG');\n\n/**\n * Injection token that can be used to reference instances of `MatSelectTrigger`. It serves as\n * alternative token to the actual `MatSelectTrigger` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nexport const MAT_SELECT_TRIGGER = new InjectionToken<MatSelectTrigger>('MatSelectTrigger');\n\n/** Change event object that is emitted when the select value has changed. */\nexport class MatSelectChange<T = any> {\n  constructor(\n    /** Reference to the select that emitted the change event. */\n    public source: MatSelect,\n    /** Current value of the select that emitted the event. */\n    public value: T,\n  ) {}\n}\n\n@Component({\n  selector: 'mat-select',\n  exportAs: 'matSelect',\n  templateUrl: 'select.html',\n  styleUrl: 'select.css',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    'role': 'combobox',\n    'aria-haspopup': 'listbox',\n    'class': 'mat-mdc-select',\n    '[attr.id]': 'id',\n    '[attr.tabindex]': 'disabled ? -1 : tabIndex',\n    '[attr.aria-controls]': 'panelOpen ? id + \"-panel\" : null',\n    '[attr.aria-expanded]': 'panelOpen',\n    '[attr.aria-label]': 'ariaLabel || null',\n    '[attr.aria-required]': 'required.toString()',\n    '[attr.aria-disabled]': 'disabled.toString()',\n    '[attr.aria-invalid]': 'errorState',\n    '[attr.aria-activedescendant]': '_getAriaActiveDescendant()',\n    '[class.mat-mdc-select-disabled]': 'disabled',\n    '[class.mat-mdc-select-invalid]': 'errorState',\n    '[class.mat-mdc-select-required]': 'required',\n    '[class.mat-mdc-select-empty]': 'empty',\n    '[class.mat-mdc-select-multiple]': 'multiple',\n    '[class.mat-select-open]': 'panelOpen',\n    '(keydown)': '_handleKeydown($event)',\n    '(focus)': '_onFocus()',\n    '(blur)': '_onBlur()',\n  },\n  providers: [\n    {provide: MatFormFieldControl, useExisting: MatSelect},\n    {provide: MAT_OPTION_PARENT_COMPONENT, useExisting: MatSelect},\n  ],\n  imports: [CdkOverlayOrigin, CdkConnectedOverlay, NgClass],\n})\nexport class MatSelect\n  implements\n    AfterContentInit,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    DoCheck,\n    ControlValueAccessor,\n    MatFormFieldControl<any>\n{\n  protected _viewportRuler = inject(ViewportRuler);\n  protected _changeDetectorRef = inject(ChangeDetectorRef);\n  readonly _elementRef = inject(ElementRef);\n  private _dir = inject(Directionality, {optional: true});\n  private _idGenerator = inject(_IdGenerator);\n  private _renderer = inject(Renderer2);\n  protected _parentFormField = inject<MatFormField>(MAT_FORM_FIELD, {optional: true});\n  ngControl = inject(NgControl, {self: true, optional: true})!;\n  private _liveAnnouncer = inject(LiveAnnouncer);\n  protected _defaultOptions = inject(MAT_SELECT_CONFIG, {optional: true});\n  protected _animationsDisabled = _animationsDisabled();\n  private _initialized = new Subject();\n  private _cleanupDetach: (() => void) | undefined;\n\n  /** All of the defined select options. */\n  @ContentChildren(MatOption, {descendants: true}) options: QueryList<MatOption>;\n\n  // TODO(crisbeto): this is only necessary for the non-MDC select, but it's technically a\n  // public API so we have to keep it. It should be deprecated and removed eventually.\n  /** All of the defined groups of options. */\n  @ContentChildren(MAT_OPTGROUP, {descendants: true}) optionGroups: QueryList<MatOptgroup>;\n\n  /** User-supplied override of the trigger element. */\n  @ContentChild(MAT_SELECT_TRIGGER) customTrigger: MatSelectTrigger;\n\n  /**\n   * This position config ensures that the top \"start\" corner of the overlay\n   * is aligned with with the top \"start\" of the origin by default (overlapping\n   * the trigger completely). If the panel cannot fit below the trigger, it\n   * will fall back to a position above the trigger.\n   */\n  _positions: ConnectedPosition[] = [\n    {\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'top',\n    },\n    {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'top',\n    },\n    {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above',\n    },\n    {\n      originX: 'end',\n      originY: 'top',\n      overlayX: 'end',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above',\n    },\n  ];\n\n  /** Scrolls a particular option into the view. */\n  _scrollOptionIntoView(index: number): void {\n    const option = this.options.toArray()[index];\n\n    if (option) {\n      const panel: HTMLElement = this.panel.nativeElement;\n      const labelCount = _countGroupLabelsBeforeOption(index, this.options, this.optionGroups);\n      const element = option._getHostElement();\n\n      if (index === 0 && labelCount === 1) {\n        // If we've got one group label before the option and we're at the top option,\n        // scroll the list to the top. This is better UX than scrolling the list to the\n        // top of the option, because it allows the user to read the top group's label.\n        panel.scrollTop = 0;\n      } else {\n        panel.scrollTop = _getOptionScrollPosition(\n          element.offsetTop,\n          element.offsetHeight,\n          panel.scrollTop,\n          panel.offsetHeight,\n        );\n      }\n    }\n  }\n\n  /** Called when the panel has been opened and the overlay has settled on its final position. */\n  private _positioningSettled() {\n    this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n  }\n\n  /** Creates a change event object that should be emitted by the select. */\n  private _getChangeEvent(value: any) {\n    return new MatSelectChange(this, value);\n  }\n\n  /** Factory function used to create a scroll strategy for this select. */\n  private _scrollStrategyFactory = inject(MAT_SELECT_SCROLL_STRATEGY);\n\n  /** Whether or not the overlay panel is open. */\n  private _panelOpen = false;\n\n  /** Comparison function to specify which option is displayed. Defaults to object equality. */\n  private _compareWith = (o1: any, o2: any) => o1 === o2;\n\n  /** Unique id for this input. */\n  private _uid = this._idGenerator.getId('mat-select-');\n\n  /** Current `aria-labelledby` value for the select trigger. */\n  private _triggerAriaLabelledBy: string | null = null;\n\n  /**\n   * Keeps track of the previous form control assigned to the select.\n   * Used to detect if it has changed.\n   */\n  private _previousControl: AbstractControl | null | undefined;\n\n  /** Emits whenever the component is destroyed. */\n  protected readonly _destroy = new Subject<void>();\n\n  /** Tracks the error state of the select. */\n  private _errorStateTracker: _ErrorStateTracker;\n\n  /**\n   * Emits whenever the component state changes and should cause the parent\n   * form-field to update. Implemented as part of `MatFormFieldControl`.\n   * @docs-private\n   */\n  readonly stateChanges = new Subject<void>();\n\n  /**\n   * Disable the automatic labeling to avoid issues like #27241.\n   * @docs-private\n   */\n  readonly disableAutomaticLabeling = true;\n\n  /**\n   * Implemented as part of MatFormFieldControl.\n   * @docs-private\n   */\n  @Input('aria-describedby') userAriaDescribedBy: string;\n\n  /** Deals with the selection logic. */\n  _selectionModel: SelectionModel<MatOption>;\n\n  /** Manages keyboard events for options in the panel. */\n  _keyManager: ActiveDescendantKeyManager<MatOption>;\n\n  /** Ideal origin for the overlay panel. */\n  _preferredOverlayOrigin: CdkOverlayOrigin | ElementRef | undefined;\n\n  /** Width of the overlay panel. */\n  _overlayWidth: string | number;\n\n  /** `View -> model callback called when value changes` */\n  _onChange: (value: any) => void = () => {};\n\n  /** `View -> model callback called when select has been touched` */\n  _onTouched = () => {};\n\n  /** ID for the DOM node containing the select's value. */\n  _valueId = this._idGenerator.getId('mat-select-value-');\n\n  /** Strategy that will be used to handle scrolling while the select panel is open. */\n  _scrollStrategy: ScrollStrategy;\n\n  _overlayPanelClass: string | string[] = this._defaultOptions?.overlayPanelClass || '';\n\n  /** Whether the select is focused. */\n  get focused(): boolean {\n    return this._focused || this._panelOpen;\n  }\n  private _focused = false;\n\n  /** A name for this control that can be used by `mat-form-field`. */\n  controlType = 'mat-select';\n\n  /** Trigger that opens the select. */\n  @ViewChild('trigger') trigger: ElementRef;\n\n  /** Panel containing the select options. */\n  @ViewChild('panel') panel: ElementRef;\n\n  /** Overlay pane containing the options. */\n  @ViewChild(CdkConnectedOverlay)\n  protected _overlayDir: CdkConnectedOverlay;\n\n  /** Classes to be passed to the select panel. Supports the same syntax as `ngClass`. */\n  @Input() panelClass: string | string[] | Set<string> | {[key: string]: any};\n\n  /** Whether the select is disabled. */\n  @Input({transform: booleanAttribute})\n  disabled: boolean = false;\n\n  /** Whether ripples in the select are disabled. */\n  @Input({transform: booleanAttribute})\n  get disableRipple() {\n    return this._disableRipple();\n  }\n  set disableRipple(value: boolean) {\n    this._disableRipple.set(value);\n  }\n  private _disableRipple = signal(false);\n\n  /** Tab index of the select. */\n  @Input({\n    transform: (value: unknown) => (value == null ? 0 : numberAttribute(value)),\n  })\n  tabIndex: number = 0;\n\n  /** Whether checkmark indicator for single-selection options is hidden. */\n  @Input({transform: booleanAttribute})\n  get hideSingleSelectionIndicator(): boolean {\n    return this._hideSingleSelectionIndicator;\n  }\n  set hideSingleSelectionIndicator(value: boolean) {\n    this._hideSingleSelectionIndicator = value;\n    this._syncParentProperties();\n  }\n  private _hideSingleSelectionIndicator: boolean =\n    this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n\n  /** Placeholder to be shown if no value has been selected. */\n  @Input()\n  get placeholder(): string {\n    return this._placeholder;\n  }\n  set placeholder(value: string) {\n    this._placeholder = value;\n    this.stateChanges.next();\n  }\n  private _placeholder: string;\n\n  /** Whether the component is required. */\n  @Input({transform: booleanAttribute})\n  get required(): boolean {\n    return this._required ?? this.ngControl?.control?.hasValidator(Validators.required) ?? false;\n  }\n  set required(value: boolean) {\n    this._required = value;\n    this.stateChanges.next();\n  }\n  private _required: boolean | undefined;\n\n  /** Whether the user should be allowed to select multiple options. */\n  @Input({transform: booleanAttribute})\n  get multiple(): boolean {\n    return this._multiple;\n  }\n  set multiple(value: boolean) {\n    if (this._selectionModel && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw getMatSelectDynamicMultipleError();\n    }\n\n    this._multiple = value;\n  }\n  private _multiple: boolean = false;\n\n  /** Whether to center the active option over the trigger. */\n  @Input({transform: booleanAttribute})\n  disableOptionCentering = this._defaultOptions?.disableOptionCentering ?? false;\n\n  /**\n   * Function to compare the option values with the selected values. The first argument\n   * is a value from an option. The second is a value from the selection. A boolean\n   * should be returned.\n   */\n  @Input()\n  get compareWith() {\n    return this._compareWith;\n  }\n  set compareWith(fn: (o1: any, o2: any) => boolean) {\n    if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw getMatSelectNonFunctionValueError();\n    }\n    this._compareWith = fn;\n    if (this._selectionModel) {\n      // A different comparator means the selection could change.\n      this._initializeSelection();\n    }\n  }\n\n  /** Value of the select control. */\n  @Input()\n  get value(): any {\n    return this._value;\n  }\n  set value(newValue: any) {\n    const hasAssigned = this._assignValue(newValue);\n\n    if (hasAssigned) {\n      this._onChange(newValue);\n    }\n  }\n  private _value: any;\n\n  /** Aria label of the select. */\n  @Input('aria-label') ariaLabel: string = '';\n\n  /** Input that can be used to specify the `aria-labelledby` attribute. */\n  @Input('aria-labelledby') ariaLabelledby: string;\n\n  /** Object used to control when error messages are shown. */\n  @Input()\n  get errorStateMatcher() {\n    return this._errorStateTracker.matcher;\n  }\n  set errorStateMatcher(value: ErrorStateMatcher) {\n    this._errorStateTracker.matcher = value;\n  }\n\n  /** Time to wait in milliseconds after the last keystroke before moving focus to an item. */\n  @Input({transform: numberAttribute})\n  typeaheadDebounceInterval: number;\n\n  /**\n   * Function used to sort the values in a select in multiple mode.\n   * Follows the same logic as `Array.prototype.sort`.\n   */\n  @Input() sortComparator: (a: MatOption, b: MatOption, options: MatOption[]) => number;\n\n  /** Unique id of the element. */\n  @Input()\n  get id(): string {\n    return this._id;\n  }\n  set id(value: string) {\n    this._id = value || this._uid;\n    this.stateChanges.next();\n  }\n  private _id: string;\n\n  /** Whether the select is in an error state. */\n  get errorState() {\n    return this._errorStateTracker.errorState;\n  }\n  set errorState(value: boolean) {\n    this._errorStateTracker.errorState = value;\n  }\n\n  /**\n   * Width of the panel. If set to `auto`, the panel will match the trigger width.\n   * If set to null or an empty string, the panel will grow to match the longest option's text.\n   */\n  @Input() panelWidth: string | number | null =\n    this._defaultOptions && typeof this._defaultOptions.panelWidth !== 'undefined'\n      ? this._defaultOptions.panelWidth\n      : 'auto';\n\n  /**\n   * By default selecting an option with a `null` or `undefined` value will reset the select's\n   * value. Enable this option if the reset behavior doesn't match your requirements and instead\n   * the nullable options should become selected. The value of this input can be controlled app-wide\n   * using the `MAT_SELECT_CONFIG` injection token.\n   */\n  @Input({transform: booleanAttribute})\n  canSelectNullableOptions: boolean = this._defaultOptions?.canSelectNullableOptions ?? false;\n\n  /** Combined stream of all of the child options' change events. */\n  readonly optionSelectionChanges: Observable<MatOptionSelectionChange> = defer(() => {\n    const options = this.options;\n\n    if (options) {\n      return options.changes.pipe(\n        startWith(options),\n        switchMap(() => merge(...options.map(option => option.onSelectionChange))),\n      );\n    }\n\n    return this._initialized.pipe(switchMap(() => this.optionSelectionChanges));\n  });\n\n  /** Event emitted when the select panel has been toggled. */\n  @Output() readonly openedChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  /** Event emitted when the select has been opened. */\n  @Output('opened') readonly _openedStream: Observable<void> = this.openedChange.pipe(\n    filter(o => o),\n    map(() => {}),\n  );\n\n  /** Event emitted when the select has been closed. */\n  @Output('closed') readonly _closedStream: Observable<void> = this.openedChange.pipe(\n    filter(o => !o),\n    map(() => {}),\n  );\n\n  /** Event emitted when the selected value has been changed by the user. */\n  @Output() readonly selectionChange = new EventEmitter<MatSelectChange>();\n\n  /**\n   * Event that emits whenever the raw value of the select changes. This is here primarily\n   * to facilitate the two-way binding for the `value` input.\n   * @docs-private\n   */\n  @Output() readonly valueChange: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor(...args: unknown[]);\n\n  constructor() {\n    const defaultErrorStateMatcher = inject(ErrorStateMatcher);\n    const parentForm = inject(NgForm, {optional: true});\n    const parentFormGroup = inject(FormGroupDirective, {optional: true});\n    const tabIndex = inject(new HostAttributeToken('tabindex'), {optional: true});\n\n    if (this.ngControl) {\n      // Note: we provide the value accessor through here, instead of\n      // the `providers` to avoid running into a circular import.\n      this.ngControl.valueAccessor = this;\n    }\n\n    // Note that we only want to set this when the defaults pass it in, otherwise it should\n    // stay as `undefined` so that it falls back to the default in the key manager.\n    if (this._defaultOptions?.typeaheadDebounceInterval != null) {\n      this.typeaheadDebounceInterval = this._defaultOptions.typeaheadDebounceInterval;\n    }\n\n    this._errorStateTracker = new _ErrorStateTracker(\n      defaultErrorStateMatcher,\n      this.ngControl,\n      parentFormGroup,\n      parentForm,\n      this.stateChanges,\n    );\n    this._scrollStrategy = this._scrollStrategyFactory();\n    this.tabIndex = tabIndex == null ? 0 : parseInt(tabIndex) || 0;\n\n    // Force setter to be called in case id was not specified.\n    this.id = this.id;\n  }\n\n  ngOnInit() {\n    this._selectionModel = new SelectionModel<MatOption>(this.multiple);\n    this.stateChanges.next();\n    this._viewportRuler\n      .change()\n      .pipe(takeUntil(this._destroy))\n      .subscribe(() => {\n        if (this.panelOpen) {\n          this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n          this._changeDetectorRef.detectChanges();\n        }\n      });\n  }\n\n  ngAfterContentInit() {\n    this._initialized.next();\n    this._initialized.complete();\n\n    this._initKeyManager();\n\n    this._selectionModel.changed.pipe(takeUntil(this._destroy)).subscribe(event => {\n      event.added.forEach(option => option.select());\n      event.removed.forEach(option => option.deselect());\n    });\n\n    this.options.changes.pipe(startWith(null), takeUntil(this._destroy)).subscribe(() => {\n      this._resetOptions();\n      this._initializeSelection();\n    });\n  }\n\n  ngDoCheck() {\n    const newAriaLabelledby = this._getTriggerAriaLabelledby();\n    const ngControl = this.ngControl;\n\n    // We have to manage setting the `aria-labelledby` ourselves, because part of its value\n    // is computed as a result of a content query which can cause this binding to trigger a\n    // \"changed after checked\" error.\n    if (newAriaLabelledby !== this._triggerAriaLabelledBy) {\n      const element: HTMLElement = this._elementRef.nativeElement;\n      this._triggerAriaLabelledBy = newAriaLabelledby;\n      if (newAriaLabelledby) {\n        element.setAttribute('aria-labelledby', newAriaLabelledby);\n      } else {\n        element.removeAttribute('aria-labelledby');\n      }\n    }\n\n    if (ngControl) {\n      // The disabled state might go out of sync if the form group is swapped out. See #17860.\n      if (this._previousControl !== ngControl.control) {\n        if (\n          this._previousControl !== undefined &&\n          ngControl.disabled !== null &&\n          ngControl.disabled !== this.disabled\n        ) {\n          this.disabled = ngControl.disabled;\n        }\n\n        this._previousControl = ngControl.control;\n      }\n\n      this.updateErrorState();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // Updating the disabled state is handled by the input, but we need to additionally let\n    // the parent form field know to run change detection when the disabled state changes.\n    if (changes['disabled'] || changes['userAriaDescribedBy']) {\n      this.stateChanges.next();\n    }\n\n    if (changes['typeaheadDebounceInterval'] && this._keyManager) {\n      this._keyManager.withTypeAhead(this.typeaheadDebounceInterval);\n    }\n  }\n\n  ngOnDestroy() {\n    this._cleanupDetach?.();\n    this._keyManager?.destroy();\n    this._destroy.next();\n    this._destroy.complete();\n    this.stateChanges.complete();\n    this._clearFromModal();\n  }\n\n  /** Toggles the overlay panel open or closed. */\n  toggle(): void {\n    this.panelOpen ? this.close() : this.open();\n  }\n\n  /** Opens the overlay panel. */\n  open(): void {\n    if (!this._canOpen()) {\n      return;\n    }\n\n    // It's important that we read this as late as possible, because doing so earlier will\n    // return a different element since it's based on queries in the form field which may\n    // not have run yet. Also this needs to be assigned before we measure the overlay width.\n    if (this._parentFormField) {\n      this._preferredOverlayOrigin = this._parentFormField.getConnectedOverlayOrigin();\n    }\n\n    this._cleanupDetach?.();\n    this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n    this._applyModalPanelOwnership();\n    this._panelOpen = true;\n    this._overlayDir.positionChange.pipe(take(1)).subscribe(() => {\n      this._changeDetectorRef.detectChanges();\n      this._positioningSettled();\n    });\n    this._overlayDir.attachOverlay();\n    this._keyManager.withHorizontalOrientation(null);\n    this._highlightCorrectOption();\n    this._changeDetectorRef.markForCheck();\n\n    // Required for the MDC form field to pick up when the overlay has been opened.\n    this.stateChanges.next();\n\n    // Simulate the animation event before we moved away from `@angular/animations`.\n    Promise.resolve().then(() => this.openedChange.emit(true));\n  }\n\n  /**\n   * Track which modal we have modified the `aria-owns` attribute of. When the combobox trigger is\n   * inside an aria-modal, we apply aria-owns to the parent modal with the `id` of the options\n   * panel. Track the modal we have changed so we can undo the changes on destroy.\n   */\n  private _trackedModal: Element | null = null;\n\n  /**\n   * If the autocomplete trigger is inside of an `aria-modal` element, connect\n   * that modal to the options panel with `aria-owns`.\n   *\n   * For some browser + screen reader combinations, when navigation is inside\n   * of an `aria-modal` element, the screen reader treats everything outside\n   * of that modal as hidden or invisible.\n   *\n   * This causes a problem when the combobox trigger is _inside_ of a modal, because the\n   * options panel is rendered _outside_ of that modal, preventing screen reader navigation\n   * from reaching the panel.\n   *\n   * We can work around this issue by applying `aria-owns` to the modal with the `id` of\n   * the options panel. This effectively communicates to assistive technology that the\n   * options panel is part of the same interaction as the modal.\n   *\n   * At time of this writing, this issue is present in VoiceOver.\n   * See https://github.com/angular/components/issues/20694\n   */\n  private _applyModalPanelOwnership() {\n    // TODO(http://github.com/angular/components/issues/26853): consider de-duplicating this with\n    // the `LiveAnnouncer` and any other usages.\n    //\n    // Note that the selector here is limited to CDK overlays at the moment in order to reduce the\n    // section of the DOM we need to look through. This should cover all the cases we support, but\n    // the selector can be expanded if it turns out to be too narrow.\n    const modal = this._elementRef.nativeElement.closest(\n      'body > .cdk-overlay-container [aria-modal=\"true\"]',\n    );\n\n    if (!modal) {\n      // Most commonly, the autocomplete trigger is not inside a modal.\n      return;\n    }\n\n    const panelId = `${this.id}-panel`;\n\n    if (this._trackedModal) {\n      removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n    }\n\n    addAriaReferencedId(modal, 'aria-owns', panelId);\n    this._trackedModal = modal;\n  }\n\n  /** Clears the reference to the listbox overlay element from the modal it was added to. */\n  private _clearFromModal() {\n    if (!this._trackedModal) {\n      // Most commonly, the autocomplete trigger is not used inside a modal.\n      return;\n    }\n\n    const panelId = `${this.id}-panel`;\n\n    removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n    this._trackedModal = null;\n  }\n\n  /** Closes the overlay panel and focuses the host element. */\n  close(): void {\n    if (this._panelOpen) {\n      this._panelOpen = false;\n      this._exitAndDetach();\n      this._keyManager.withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr');\n      this._changeDetectorRef.markForCheck();\n      this._onTouched();\n      // Required for the MDC form field to pick up when the overlay has been closed.\n      this.stateChanges.next();\n\n      // Simulate the animation event before we moved away from `@angular/animations`.\n      Promise.resolve().then(() => this.openedChange.emit(false));\n    }\n  }\n\n  /** Triggers the exit animation and detaches the overlay at the end. */\n  private _exitAndDetach() {\n    if (this._animationsDisabled || !this.panel) {\n      this._detachOverlay();\n      return;\n    }\n\n    this._cleanupDetach?.();\n    this._cleanupDetach = () => {\n      cleanupEvent();\n      clearTimeout(exitFallbackTimer);\n      this._cleanupDetach = undefined;\n    };\n\n    const panel: HTMLElement = this.panel.nativeElement;\n    const cleanupEvent = this._renderer.listen(panel, 'animationend', (event: AnimationEvent) => {\n      if (event.animationName === '_mat-select-exit') {\n        this._cleanupDetach?.();\n        this._detachOverlay();\n      }\n    });\n\n    // Since closing the overlay depends on the animation, we have a fallback in case the panel\n    // doesn't animate. This can happen in some internal tests that do `* {animation: none}`.\n    const exitFallbackTimer = setTimeout(() => {\n      this._cleanupDetach?.();\n      this._detachOverlay();\n    }, 200);\n\n    panel.classList.add('mat-select-panel-exit');\n  }\n\n  /** Detaches the current overlay directive. */\n  private _detachOverlay() {\n    this._overlayDir.detachOverlay();\n    // Some of the overlay detachment logic depends on change detection.\n    // Mark for check to ensure that things get picked up in a timely manner.\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /**\n   * Sets the select's value. Part of the ControlValueAccessor interface\n   * required to integrate with Angular's core forms API.\n   *\n   * @param value New value to be written to the model.\n   */\n  writeValue(value: any): void {\n    this._assignValue(value);\n  }\n\n  /**\n   * Saves a callback function to be invoked when the select's value\n   * changes from user input. Part of the ControlValueAccessor interface\n   * required to integrate with Angular's core forms API.\n   *\n   * @param fn Callback to be triggered when the value changes.\n   */\n  registerOnChange(fn: (value: any) => void): void {\n    this._onChange = fn;\n  }\n\n  /**\n   * Saves a callback function to be invoked when the select is blurred\n   * by the user. Part of the ControlValueAccessor interface required\n   * to integrate with Angular's core forms API.\n   *\n   * @param fn Callback to be triggered when the component has been touched.\n   */\n  registerOnTouched(fn: () => {}): void {\n    this._onTouched = fn;\n  }\n\n  /**\n   * Disables the select. Part of the ControlValueAccessor interface required\n   * to integrate with Angular's core forms API.\n   *\n   * @param isDisabled Sets whether the component is disabled.\n   */\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n    this._changeDetectorRef.markForCheck();\n    this.stateChanges.next();\n  }\n\n  /** Whether or not the overlay panel is open. */\n  get panelOpen(): boolean {\n    return this._panelOpen;\n  }\n\n  /** The currently selected option. */\n  get selected(): MatOption | MatOption[] {\n    return this.multiple ? this._selectionModel?.selected || [] : this._selectionModel?.selected[0];\n  }\n\n  /** The value displayed in the trigger. */\n  get triggerValue(): string {\n    if (this.empty) {\n      return '';\n    }\n\n    if (this._multiple) {\n      const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n\n      if (this._isRtl()) {\n        selectedOptions.reverse();\n      }\n\n      // TODO(crisbeto): delimiter should be configurable for proper localization.\n      return selectedOptions.join(', ');\n    }\n\n    return this._selectionModel.selected[0].viewValue;\n  }\n\n  /** Refreshes the error state of the select. */\n  updateErrorState() {\n    this._errorStateTracker.updateErrorState();\n  }\n\n  /** Whether the element is in RTL mode. */\n  _isRtl(): boolean {\n    return this._dir ? this._dir.value === 'rtl' : false;\n  }\n\n  /** Handles all keydown events on the select. */\n  _handleKeydown(event: KeyboardEvent): void {\n    if (!this.disabled) {\n      this.panelOpen ? this._handleOpenKeydown(event) : this._handleClosedKeydown(event);\n    }\n  }\n\n  /** Handles keyboard events while the select is closed. */\n  private _handleClosedKeydown(event: KeyboardEvent): void {\n    const keyCode = event.keyCode;\n    const isArrowKey =\n      keyCode === DOWN_ARROW ||\n      keyCode === UP_ARROW ||\n      keyCode === LEFT_ARROW ||\n      keyCode === RIGHT_ARROW;\n    const isOpenKey = keyCode === ENTER || keyCode === SPACE;\n    const manager = this._keyManager;\n\n    // Open the select on ALT + arrow key to match the native <select>\n    if (\n      (!manager.isTyping() && isOpenKey && !hasModifierKey(event)) ||\n      ((this.multiple || event.altKey) && isArrowKey)\n    ) {\n      event.preventDefault(); // prevents the page from scrolling down when pressing space\n      this.open();\n    } else if (!this.multiple) {\n      const previouslySelectedOption = this.selected;\n      manager.onKeydown(event);\n      const selectedOption = this.selected;\n\n      // Since the value has changed, we need to announce it ourselves.\n      if (selectedOption && previouslySelectedOption !== selectedOption) {\n        // We set a duration on the live announcement, because we want the live element to be\n        // cleared after a while so that users can't navigate to it using the arrow keys.\n        this._liveAnnouncer.announce((selectedOption as MatOption).viewValue, 10000);\n      }\n    }\n  }\n\n  /** Handles keyboard events when the selected is open. */\n  private _handleOpenKeydown(event: KeyboardEvent): void {\n    const manager = this._keyManager;\n    const keyCode = event.keyCode;\n    const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW;\n    const isTyping = manager.isTyping();\n\n    if (isArrowKey && event.altKey) {\n      // Close the select on ALT + arrow key to match the native <select>\n      event.preventDefault();\n      this.close();\n      // Don't do anything in this case if the user is typing,\n      // because the typing sequence can include the space key.\n    } else if (\n      !isTyping &&\n      (keyCode === ENTER || keyCode === SPACE) &&\n      manager.activeItem &&\n      !hasModifierKey(event)\n    ) {\n      event.preventDefault();\n      manager.activeItem._selectViaInteraction();\n    } else if (!isTyping && this._multiple && keyCode === A && event.ctrlKey) {\n      event.preventDefault();\n      const hasDeselectedOptions = this.options.some(opt => !opt.disabled && !opt.selected);\n\n      this.options.forEach(option => {\n        if (!option.disabled) {\n          hasDeselectedOptions ? option.select() : option.deselect();\n        }\n      });\n    } else {\n      const previouslyFocusedIndex = manager.activeItemIndex;\n\n      manager.onKeydown(event);\n\n      if (\n        this._multiple &&\n        isArrowKey &&\n        event.shiftKey &&\n        manager.activeItem &&\n        manager.activeItemIndex !== previouslyFocusedIndex\n      ) {\n        manager.activeItem._selectViaInteraction();\n      }\n    }\n  }\n\n  /** Handles keyboard events coming from the overlay. */\n  protected _handleOverlayKeydown(event: KeyboardEvent): void {\n    // TODO(crisbeto): prior to #30363 this was being handled inside the overlay directive, but we\n    // need control over the animation timing so we do it manually. We should remove the `keydown`\n    // listener from `.mat-mdc-select-panel` and handle all the events here. That may cause\n    // further test breakages so it's left for a follow-up.\n    if (event.keyCode === ESCAPE && !hasModifierKey(event)) {\n      event.preventDefault();\n      this.close();\n    }\n  }\n\n  _onFocus() {\n    if (!this.disabled) {\n      this._focused = true;\n      this.stateChanges.next();\n    }\n  }\n\n  /**\n   * Calls the touched callback only if the panel is closed. Otherwise, the trigger will\n   * \"blur\" to the panel when it opens, causing a false positive.\n   */\n  _onBlur() {\n    this._focused = false;\n    this._keyManager?.cancelTypeahead();\n\n    if (!this.disabled && !this.panelOpen) {\n      this._onTouched();\n      this._changeDetectorRef.markForCheck();\n      this.stateChanges.next();\n    }\n  }\n\n  /** Returns the theme to be used on the panel. */\n  _getPanelTheme(): string {\n    return this._parentFormField ? `mat-${this._parentFormField.color}` : '';\n  }\n\n  /** Whether the select has a value. */\n  get empty(): boolean {\n    return !this._selectionModel || this._selectionModel.isEmpty();\n  }\n\n  private _initializeSelection(): void {\n    // Defer setting the value in order to avoid the \"Expression\n    // has changed after it was checked\" errors from Angular.\n    Promise.resolve().then(() => {\n      if (this.ngControl) {\n        this._value = this.ngControl.value;\n      }\n\n      this._setSelectionByValue(this._value);\n      this.stateChanges.next();\n    });\n  }\n\n  /**\n   * Sets the selected option based on a value. If no option can be\n   * found with the designated value, the select trigger is cleared.\n   */\n  private _setSelectionByValue(value: any | any[]): void {\n    this.options.forEach(option => option.setInactiveStyles());\n    this._selectionModel.clear();\n\n    if (this.multiple && value) {\n      if (!Array.isArray(value) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectNonArrayValueError();\n      }\n\n      value.forEach((currentValue: any) => this._selectOptionByValue(currentValue));\n      this._sortValues();\n    } else {\n      const correspondingOption = this._selectOptionByValue(value);\n\n      // Shift focus to the active item. Note that we shouldn't do this in multiple\n      // mode, because we don't know what option the user interacted with last.\n      if (correspondingOption) {\n        this._keyManager.updateActiveItem(correspondingOption);\n      } else if (!this.panelOpen) {\n        // Otherwise reset the highlighted option. Note that we only want to do this while\n        // closed, because doing it while open can shift the user's focus unnecessarily.\n        this._keyManager.updateActiveItem(-1);\n      }\n    }\n\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /**\n   * Finds and selects and option based on its value.\n   * @returns Option that has the corresponding value.\n   */\n  private _selectOptionByValue(value: any): MatOption | undefined {\n    const correspondingOption = this.options.find((option: MatOption) => {\n      // Skip options that are already in the model. This allows us to handle cases\n      // where the same primitive value is selected multiple times.\n      if (this._selectionModel.isSelected(option)) {\n        return false;\n      }\n\n      try {\n        // Treat null as a special reset value.\n        return (\n          (option.value != null || this.canSelectNullableOptions) &&\n          this._compareWith(option.value, value)\n        );\n      } catch (error) {\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n          // Notify developers of errors in their comparator.\n          console.warn(error);\n        }\n        return false;\n      }\n    });\n\n    if (correspondingOption) {\n      this._selectionModel.select(correspondingOption);\n    }\n\n    return correspondingOption;\n  }\n\n  /** Assigns a specific value to the select. Returns whether the value has changed. */\n  private _assignValue(newValue: any | any[]): boolean {\n    // Always re-assign an array, because it might have been mutated.\n    if (newValue !== this._value || (this._multiple && Array.isArray(newValue))) {\n      if (this.options) {\n        this._setSelectionByValue(newValue);\n      }\n\n      this._value = newValue;\n      return true;\n    }\n    return false;\n  }\n\n  // `skipPredicate` determines if key manager should avoid putting a given option in the tab\n  // order. Allow disabled list items to receive focus via keyboard to align with WAI ARIA\n  // recommendation.\n  //\n  // Normally WAI ARIA's instructions are to exclude disabled items from the tab order, but it\n  // makes a few exceptions for compound widgets.\n  //\n  // From [Developing a Keyboard Interface](\n  // https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/):\n  //   \"For the following composite widget elements, keep them focusable when disabled: Options in a\n  //   Listbox...\"\n  //\n  // The user can focus disabled options using the keyboard, but the user cannot click disabled\n  // options.\n  private _skipPredicate = (option: MatOption) => {\n    if (this.panelOpen) {\n      // Support keyboard focusing disabled options in an ARIA listbox.\n      return false;\n    }\n\n    // When the panel is closed, skip over disabled options. Support options via the UP/DOWN arrow\n    // keys on a closed select. ARIA listbox interaction pattern is less relevant when the panel is\n    // closed.\n    return option.disabled;\n  };\n\n  /** Gets how wide the overlay panel should be. */\n  private _getOverlayWidth(\n    preferredOrigin: ElementRef<ElementRef> | CdkOverlayOrigin | undefined,\n  ): string | number {\n    if (this.panelWidth === 'auto') {\n      const refToMeasure =\n        preferredOrigin instanceof CdkOverlayOrigin\n          ? preferredOrigin.elementRef\n          : preferredOrigin || this._elementRef;\n      return refToMeasure.nativeElement.getBoundingClientRect().width;\n    }\n\n    return this.panelWidth === null ? '' : this.panelWidth;\n  }\n  /** Syncs the parent state with the individual options. */\n  _syncParentProperties(): void {\n    if (this.options) {\n      for (const option of this.options) {\n        option._changeDetectorRef.markForCheck();\n      }\n    }\n  }\n\n  /** Sets up a key manager to listen to keyboard events on the overlay panel. */\n  private _initKeyManager() {\n    this._keyManager = new ActiveDescendantKeyManager<MatOption>(this.options)\n      .withTypeAhead(this.typeaheadDebounceInterval)\n      .withVerticalOrientation()\n      .withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr')\n      .withHomeAndEnd()\n      .withPageUpDown()\n      .withAllowedModifierKeys(['shiftKey'])\n      .skipPredicate(this._skipPredicate);\n\n    this._keyManager.tabOut.subscribe(() => {\n      if (this.panelOpen) {\n        // Select the active item when tabbing away. This is consistent with how the native\n        // select behaves. Note that we only want to do this in single selection mode.\n        if (!this.multiple && this._keyManager.activeItem) {\n          this._keyManager.activeItem._selectViaInteraction();\n        }\n\n        // Restore focus to the trigger before closing. Ensures that the focus\n        // position won't be lost if the user got focus into the overlay.\n        this.focus();\n        this.close();\n      }\n    });\n\n    this._keyManager.change.subscribe(() => {\n      if (this._panelOpen && this.panel) {\n        this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n      } else if (!this._panelOpen && !this.multiple && this._keyManager.activeItem) {\n        this._keyManager.activeItem._selectViaInteraction();\n      }\n    });\n  }\n\n  /** Drops current option subscriptions and IDs and resets from scratch. */\n  private _resetOptions(): void {\n    const changedOrDestroyed = merge(this.options.changes, this._destroy);\n\n    this.optionSelectionChanges.pipe(takeUntil(changedOrDestroyed)).subscribe(event => {\n      this._onSelect(event.source, event.isUserInput);\n\n      if (event.isUserInput && !this.multiple && this._panelOpen) {\n        this.close();\n        this.focus();\n      }\n    });\n\n    // Listen to changes in the internal state of the options and react accordingly.\n    // Handles cases like the labels of the selected options changing.\n    merge(...this.options.map(option => option._stateChanges))\n      .pipe(takeUntil(changedOrDestroyed))\n      .subscribe(() => {\n        // `_stateChanges` can fire as a result of a change in the label's DOM value which may\n        // be the result of an expression changing. We have to use `detectChanges` in order\n        // to avoid \"changed after checked\" errors (see #14793).\n        this._changeDetectorRef.detectChanges();\n        this.stateChanges.next();\n      });\n  }\n\n  /** Invoked when an option is clicked. */\n  private _onSelect(option: MatOption, isUserInput: boolean): void {\n    const wasSelected = this._selectionModel.isSelected(option);\n\n    if (!this.canSelectNullableOptions && option.value == null && !this._multiple) {\n      option.deselect();\n      this._selectionModel.clear();\n\n      if (this.value != null) {\n        this._propagateChanges(option.value);\n      }\n    } else {\n      if (wasSelected !== option.selected) {\n        option.selected\n          ? this._selectionModel.select(option)\n          : this._selectionModel.deselect(option);\n      }\n\n      if (isUserInput) {\n        this._keyManager.setActiveItem(option);\n      }\n\n      if (this.multiple) {\n        this._sortValues();\n\n        if (isUserInput) {\n          // In case the user selected the option with their mouse, we\n          // want to restore focus back to the trigger, in order to\n          // prevent the select keyboard controls from clashing with\n          // the ones from `mat-option`.\n          this.focus();\n        }\n      }\n    }\n\n    if (wasSelected !== this._selectionModel.isSelected(option)) {\n      this._propagateChanges();\n    }\n\n    this.stateChanges.next();\n  }\n\n  /** Sorts the selected values in the selected based on their order in the panel. */\n  private _sortValues() {\n    if (this.multiple) {\n      const options = this.options.toArray();\n\n      this._selectionModel.sort((a, b) => {\n        return this.sortComparator\n          ? this.sortComparator(a, b, options)\n          : options.indexOf(a) - options.indexOf(b);\n      });\n      this.stateChanges.next();\n    }\n  }\n\n  /** Emits change event to set the model value. */\n  private _propagateChanges(fallbackValue?: any): void {\n    let valueToEmit: any;\n\n    if (this.multiple) {\n      valueToEmit = (this.selected as MatOption[]).map(option => option.value);\n    } else {\n      valueToEmit = this.selected ? (this.selected as MatOption).value : fallbackValue;\n    }\n\n    this._value = valueToEmit;\n    this.valueChange.emit(valueToEmit);\n    this._onChange(valueToEmit);\n    this.selectionChange.emit(this._getChangeEvent(valueToEmit));\n    this._changeDetectorRef.markForCheck();\n  }\n\n  /**\n   * Highlights the selected item. If no option is selected, it will highlight\n   * the first *enabled* option.\n   */\n  private _highlightCorrectOption(): void {\n    if (this._keyManager) {\n      if (this.empty) {\n        // Find the index of the first *enabled* option. Avoid calling `_keyManager.setActiveItem`\n        // because it activates the first option that passes the skip predicate, rather than the\n        // first *enabled* option.\n        let firstEnabledOptionIndex = -1;\n        for (let index = 0; index < this.options.length; index++) {\n          const option = this.options.get(index)!;\n          if (!option.disabled) {\n            firstEnabledOptionIndex = index;\n            break;\n          }\n        }\n\n        this._keyManager.setActiveItem(firstEnabledOptionIndex);\n      } else {\n        this._keyManager.setActiveItem(this._selectionModel.selected[0]);\n      }\n    }\n  }\n\n  /** Whether the panel is allowed to open. */\n  protected _canOpen(): boolean {\n    return !this._panelOpen && !this.disabled && this.options?.length > 0 && !!this._overlayDir;\n  }\n\n  /** Focuses the select element. */\n  focus(options?: FocusOptions): void {\n    this._elementRef.nativeElement.focus(options);\n  }\n\n  /** Gets the aria-labelledby for the select panel. */\n  _getPanelAriaLabelledby(): string | null {\n    if (this.ariaLabel) {\n      return null;\n    }\n\n    const labelId = this._parentFormField?.getLabelId() || null;\n    const labelExpression = labelId ? labelId + ' ' : '';\n    return this.ariaLabelledby ? labelExpression + this.ariaLabelledby : labelId;\n  }\n\n  /** Determines the `aria-activedescendant` to be set on the host. */\n  _getAriaActiveDescendant(): string | null {\n    if (this.panelOpen && this._keyManager && this._keyManager.activeItem) {\n      return this._keyManager.activeItem.id;\n    }\n\n    return null;\n  }\n\n  /** Gets the aria-labelledby of the select component trigger. */\n  private _getTriggerAriaLabelledby(): string | null {\n    if (this.ariaLabel) {\n      return null;\n    }\n\n    let value = this._parentFormField?.getLabelId() || '';\n\n    if (this.ariaLabelledby) {\n      value += ' ' + this.ariaLabelledby;\n    }\n\n    // The value should not be used for the trigger's aria-labelledby,\n    // but this currently \"breaks\" accessibility tests since they complain\n    // there is no aria-labelledby. This is because they are not setting an\n    // appropriate label on the form field or select.\n    // TODO: remove this conditional after fixing clients by ensuring their\n    // selects have a label applied.\n    if (!value) {\n      value = this._valueId;\n    }\n\n    return value;\n  }\n\n  /**\n   * Implemented as part of MatFormFieldControl.\n   * @docs-private\n   */\n  get describedByIds(): string[] {\n    const element = this._elementRef.nativeElement;\n    const existingDescribedBy = element.getAttribute('aria-describedby');\n\n    return existingDescribedBy?.split(' ') || [];\n  }\n\n  /**\n   * Implemented as part of MatFormFieldControl.\n   * @docs-private\n   */\n  setDescribedByIds(ids: string[]) {\n    const element = this._elementRef.nativeElement;\n\n    if (ids.length) {\n      element.setAttribute('aria-describedby', ids.join(' '));\n    } else {\n      element.removeAttribute('aria-describedby');\n    }\n  }\n\n  /**\n   * Implemented as part of MatFormFieldControl.\n   * @docs-private\n   */\n  onContainerClick(event: MouseEvent) {\n    const target = _getEventTarget(event) as HTMLElement | null;\n\n    // Since the overlay is inside the form field, this handler can fire for interactions\n    // with the container. Note that while it's redundant to select both for the popover\n    // and select panel, we need to do it because it tests the clicks can occur after\n    // the panel was detached from the popover.\n    if (\n      target &&\n      (target.tagName === 'MAT-OPTION' ||\n        target.classList.contains('cdk-overlay-backdrop') ||\n        target.closest('.mat-mdc-select-panel'))\n    ) {\n      return;\n    }\n\n    this.focus();\n    this.open();\n  }\n\n  /**\n   * Implemented as part of MatFormFieldControl.\n   * @docs-private\n   */\n  get shouldLabelFloat(): boolean {\n    // Since the panel doesn't overlap the trigger, we\n    // want the label to only float when there's a value.\n    return this.panelOpen || !this.empty || (this.focused && !!this.placeholder);\n  }\n}\n\n/**\n * Allows the user to customize the trigger that is displayed when the select has a value.\n */\n@Directive({\n  selector: 'mat-select-trigger',\n  providers: [{provide: MAT_SELECT_TRIGGER, useExisting: MatSelectTrigger}],\n})\nexport class MatSelectTrigger {}\n","<div cdk-overlay-origin\n     class=\"mat-mdc-select-trigger\"\n     (click)=\"open()\"\n     #fallbackOverlayOrigin=\"cdkOverlayOrigin\"\n     #trigger>\n\n  <div class=\"mat-mdc-select-value\" [attr.id]=\"_valueId\">\n    @if (empty) {\n      <span class=\"mat-mdc-select-placeholder mat-mdc-select-min-line\">{{placeholder}}</span>\n    } @else {\n      <span class=\"mat-mdc-select-value-text\">\n        @if (customTrigger) {\n          <ng-content select=\"mat-select-trigger\"></ng-content>\n        } @else {\n          <span class=\"mat-mdc-select-min-line\">{{triggerValue}}</span>\n        }\n      </span>\n    }\n  </div>\n\n  <div class=\"mat-mdc-select-arrow-wrapper\">\n    <div class=\"mat-mdc-select-arrow\">\n      <!-- Use an inline SVG, because it works better than a CSS triangle in high contrast mode. -->\n      <svg viewBox=\"0 0 24 24\" width=\"24px\" height=\"24px\" focusable=\"false\" aria-hidden=\"true\">\n        <path d=\"M7 10l5 5 5-5z\"/>\n      </svg>\n    </div>\n  </div>\n</div>\n\n<ng-template\n  cdk-connected-overlay\n  cdkConnectedOverlayLockPosition\n  cdkConnectedOverlayHasBackdrop\n  cdkConnectedOverlayBackdropClass=\"cdk-overlay-transparent-backdrop\"\n  [cdkConnectedOverlayDisableClose]=\"true\"\n  [cdkConnectedOverlayPanelClass]=\"_overlayPanelClass\"\n  [cdkConnectedOverlayScrollStrategy]=\"_scrollStrategy\"\n  [cdkConnectedOverlayOrigin]=\"_preferredOverlayOrigin || fallbackOverlayOrigin\"\n  [cdkConnectedOverlayPositions]=\"_positions\"\n  [cdkConnectedOverlayWidth]=\"_overlayWidth\"\n  [cdkConnectedOverlayFlexibleDimensions]=\"true\"\n  cdkConnectedOverlayUsePopover=\"inline\"\n  (detach)=\"close()\"\n  (backdropClick)=\"close()\"\n  (overlayKeydown)=\"_handleOverlayKeydown($event)\">\n  <div\n    #panel\n    role=\"listbox\"\n    tabindex=\"-1\"\n    class=\"mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open {{ _getPanelTheme() }}\"\n    [class.mat-select-panel-animations-enabled]=\"!_animationsDisabled\"\n    [attr.id]=\"id + '-panel'\"\n    [attr.aria-multiselectable]=\"multiple\"\n    [attr.aria-label]=\"ariaLabel || null\"\n    [attr.aria-labelledby]=\"_getPanelAriaLabelledby()\"\n    [ngClass]=\"panelClass\"\n    (keydown)=\"_handleKeydown($event)\">\n    <ng-content></ng-content>\n  </div>\n</ng-template>\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {OverlayModule} from '@angular/cdk/overlay';\nimport {NgModule} from '@angular/core';\nimport {MatOptionModule} from '../core';\nimport {MatFormFieldModule} from '../form-field';\nimport {CdkScrollableModule} from '@angular/cdk/scrolling';\nimport {MatSelect, MatSelectTrigger} from './select';\nimport {BidiModule} from '@angular/cdk/bidi';\n\n@NgModule({\n  imports: [OverlayModule, MatOptionModule, MatSelect, MatSelectTrigger],\n  exports: [\n    BidiModule,\n    CdkScrollableModule,\n    MatFormFieldModule,\n    MatSelect,\n    MatSelectTrigger,\n    MatOptionModule,\n  ],\n})\nexport class MatSelectModule {}\n"],"names":["getMatSelectDynamicMultipleError","Error","getMatSelectNonArrayValueError","getMatSelectNonFunctionValueError","MAT_SELECT_SCROLL_STRATEGY","InjectionToken","providedIn","factory","injector","inject","Injector","createRepositionScrollStrategy","MAT_SELECT_CONFIG","MAT_SELECT_TRIGGER","MatSelectChange","source","value","constructor","MatSelect","_viewportRuler","ViewportRuler","_changeDetectorRef","ChangeDetectorRef","_elementRef","ElementRef","_dir","Directionality","optional","_idGenerator","_IdGenerator","_renderer","Renderer2","_parentFormField","MAT_FORM_FIELD","ngControl","NgControl","self","_liveAnnouncer","LiveAnnouncer","_defaultOptions","_animationsDisabled","_initialized","Subject","_cleanupDetach","options","optionGroups","customTrigger","_positions","originX","originY","overlayX","overlayY","panelClass","_scrollOptionIntoView","index","option","toArray","panel","nativeElement","labelCount","_countGroupLabelsBeforeOption","element","_getHostElement","scrollTop","_getOptionScrollPosition","offsetTop","offsetHeight","_positioningSettled","_keyManager","activeItemIndex","_getChangeEvent","_scrollStrategyFactory","_panelOpen","_compareWith","o1","o2","_uid","getId","_triggerAriaLabelledBy","_previousControl","_destroy","_errorStateTracker","stateChanges","disableAutomaticLabeling","userAriaDescribedBy","_selectionModel","_preferredOverlayOrigin","_overlayWidth","_onChange","_onTouched","_valueId","_scrollStrategy","_overlayPanelClass","overlayPanelClass","focused","_focused","controlType","trigger","_overlayDir","disabled","disableRipple","_disableRipple","set","signal","tabIndex","hideSingleSelectionIndicator","_hideSingleSelectionIndicator","_syncParentProperties","placeholder","_placeholder","next","required","_required","control","hasValidator","Validators","multiple","_multiple","ngDevMode","disableOptionCentering","compareWith","fn","_initializeSelection","_value","newValue","hasAssigned","_assignValue","ariaLabel","ariaLabelledby","errorStateMatcher","matcher","typeaheadDebounceInterval","sortComparator","id","_id","errorState","panelWidth","canSelectNullableOptions","optionSelectionChanges","defer","changes","pipe","startWith","switchMap","merge","map","onSelectionChange","openedChange","EventEmitter","_openedStream","filter","o","_closedStream","selectionChange","valueChange","defaultErrorStateMatcher","ErrorStateMatcher","parentForm","NgForm","parentFormGroup","FormGroupDirective","HostAttributeToken","valueAccessor","_ErrorStateTracker","parseInt","ngOnInit","SelectionModel","change","takeUntil","subscribe","panelOpen","_getOverlayWidth","detectChanges","ngAfterContentInit","complete","_initKeyManager","changed","event","added","forEach","select","removed","deselect","_resetOptions","ngDoCheck","newAriaLabelledby","_getTriggerAriaLabelledby","setAttribute","removeAttribute","undefined","updateErrorState","ngOnChanges","withTypeAhead","ngOnDestroy","destroy","_clearFromModal","toggle","close","open","_canOpen","getConnectedOverlayOrigin","_applyModalPanelOwnership","positionChange","take","attachOverlay","withHorizontalOrientation","_highlightCorrectOption","markForCheck","Promise","resolve","then","emit","_trackedModal","modal","closest","panelId","removeAriaReferencedId","addAriaReferencedId","_exitAndDetach","_isRtl","_detachOverlay","cleanupEvent","clearTimeout","exitFallbackTimer","listen","animationName","setTimeout","classList","add","detachOverlay","writeValue","registerOnChange","registerOnTouched","setDisabledState","isDisabled","selected","triggerValue","empty","selectedOptions","viewValue","reverse","join","_handleKeydown","_handleOpenKeydown","_handleClosedKeydown","keyCode","isArrowKey","DOWN_ARROW","UP_ARROW","LEFT_ARROW","RIGHT_ARROW","isOpenKey","ENTER","SPACE","manager","isTyping","hasModifierKey","altKey","preventDefault","previouslySelectedOption","onKeydown","selectedOption","announce","activeItem","_selectViaInteraction","A","ctrlKey","hasDeselectedOptions","some","opt","previouslyFocusedIndex","shiftKey","_handleOverlayKeydown","ESCAPE","_onFocus","_onBlur","cancelTypeahead","_getPanelTheme","color","isEmpty","_setSelectionByValue","setInactiveStyles","clear","Array","isArray","currentValue","_selectOptionByValue","_sortValues","correspondingOption","updateActiveItem","find","isSelected","error","console","warn","_skipPredicate","preferredOrigin","refToMeasure","CdkOverlayOrigin","elementRef","getBoundingClientRect","width","ActiveDescendantKeyManager","withVerticalOrientation","withHomeAndEnd","withPageUpDown","withAllowedModifierKeys","skipPredicate","tabOut","focus","changedOrDestroyed","_onSelect","isUserInput","_stateChanges","wasSelected","_propagateChanges","setActiveItem","sort","a","b","indexOf","fallbackValue","valueToEmit","firstEnabledOptionIndex","length","get","_getPanelAriaLabelledby","labelId","getLabelId","labelExpression","_getAriaActiveDescendant","describedByIds","existingDescribedBy","getAttribute","split","setDescribedByIds","ids","onContainerClick","target","_getEventTarget","tagName","contains","shouldLabelFloat","deps","i0","FactoryTarget","Component","cmp","ngDeclareComponent","minVersion","version","type","booleanAttribute","numberAttribute","outputs","host","attributes","listeners","properties","classAttribute","providers","provide","MatFormFieldControl","useExisting","MAT_OPTION_PARENT_COMPONENT","queries","propertyName","first","predicate","descendants","MatOption","MAT_OPTGROUP","viewQueries","CdkConnectedOverlay","exportAs","usesOnChanges","ngImport","template","styles","dependencies","kind","selector","NgClass","inputs","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","decorators","imports","ContentChildren","args","ContentChild","Input","ViewChild","transform","Output","MatSelectTrigger","Directive","isStandalone","MatSelectModule","NgModule","OverlayModule","MatOptionModule","exports","BidiModule","CdkScrollableModule","MatFormFieldModule","inj","ngDeclareInjector"],"mappings":"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"}
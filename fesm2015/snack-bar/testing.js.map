{"version":3,"file":"snack-bar__testing.js","sources":["../../../../../../src/material/snack-bar/testing/snack-bar-harness.ts","../../../../../../src/material/snack-bar/testing/snack-bar-harness-filters.ts","../../../../../../src/material/snack-bar/testing/public-api.ts","../../../../../../src/material/snack-bar/testing/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AriaLivePoliteness} from '@angular/cdk/a11y';\nimport {ContentContainerComponentHarness, HarnessPredicate} from '@angular/cdk/testing';\nimport {SnackBarHarnessFilters} from './snack-bar-harness-filters';\n\n/** Harness for interacting with a standard mat-snack-bar in tests. */\nexport class MatSnackBarHarness extends ContentContainerComponentHarness<string> {\n  // Developers can provide a custom component or template for the\n  // snackbar. The canonical snack-bar parent is the \"MatSnackBarContainer\".\n  /** The selector for the host element of a `MatSnackBar` instance. */\n  static hostSelector = '.mat-snack-bar-container';\n\n  private _simpleSnackBar = this.locatorForOptional('.mat-simple-snackbar');\n  private _simpleSnackBarLiveRegion = this.locatorFor('[aria-live]');\n  private _simpleSnackBarMessage = this.locatorFor('.mat-simple-snackbar > span');\n  private _simpleSnackBarActionButton =\n      this.locatorForOptional('.mat-simple-snackbar-action > button');\n\n  /**\n   * Gets a `HarnessPredicate` that can be used to search for a `MatSnackBarHarness` that meets\n   * certain criteria.\n   * @param options Options for filtering which snack bar instances are considered a match.\n   * @return a `HarnessPredicate` configured with the given options.\n   */\n  static with(options: SnackBarHarnessFilters = {}): HarnessPredicate<MatSnackBarHarness> {\n    return new HarnessPredicate(MatSnackBarHarness, options);\n  }\n\n  /**\n   * Gets the role of the snack-bar. The role of a snack-bar is determined based\n   * on the ARIA politeness specified in the snack-bar config.\n   * @deprecated @breaking-change 13.0.0 Use `getAriaLive` instead.\n   */\n  async getRole(): Promise<'alert'|'status'|null> {\n    return (await this.host()).getAttribute('role') as Promise<'alert'|'status'|null>;\n  }\n\n  /**\n   * Gets the aria-live of the snack-bar's live region. The aria-live of a snack-bar is\n   * determined based on the ARIA politeness specified in the snack-bar config.\n   */\n  async getAriaLive(): Promise<AriaLivePoliteness> {\n    return (await this._simpleSnackBarLiveRegion())\n        .getAttribute('aria-live') as Promise<AriaLivePoliteness>;\n  }\n\n  /**\n   * Whether the snack-bar has an action. Method cannot be used for snack-bar's with custom content.\n   */\n  async hasAction(): Promise<boolean> {\n    await this._assertSimpleSnackBar();\n    return (await this._simpleSnackBarActionButton()) !== null;\n  }\n\n  /**\n   * Gets the description of the snack-bar. Method cannot be used for snack-bar's without action or\n   * with custom content.\n   */\n  async getActionDescription(): Promise<string> {\n    await this._assertSimpleSnackBarWithAction();\n    return (await this._simpleSnackBarActionButton())!.text();\n  }\n\n\n  /**\n   * Dismisses the snack-bar by clicking the action button. Method cannot be used for snack-bar's\n   * without action or with custom content.\n   */\n  async dismissWithAction(): Promise<void> {\n    await this._assertSimpleSnackBarWithAction();\n    await (await this._simpleSnackBarActionButton())!.click();\n  }\n\n  /**\n   * Gets the message of the snack-bar. Method cannot be used for snack-bar's with custom content.\n   */\n  async getMessage(): Promise<string> {\n    await this._assertSimpleSnackBar();\n    return (await this._simpleSnackBarMessage()).text();\n  }\n\n  /** Gets whether the snack-bar has been dismissed. */\n  async isDismissed(): Promise<boolean> {\n    // We consider the snackbar dismissed if it's not in the DOM. We can assert that the\n    // element isn't in the DOM by seeing that its width and height are zero.\n\n    const host = await this.host();\n    const [exit, dimensions] = await Promise.all([\n      // The snackbar container is marked with the \"exit\" attribute after it has been dismissed\n      // but before the animation has finished (after which it's removed from the DOM).\n      host.getAttribute('mat-exit'),\n      host.getDimensions(),\n    ]);\n\n    return exit != null || (!!dimensions && dimensions.height === 0 && dimensions.width === 0);\n  }\n\n  /**\n   * Asserts that the current snack-bar does not use custom content. Promise rejects if\n   * custom content is used.\n   */\n  private async _assertSimpleSnackBar(): Promise<void> {\n    if (!await this._isSimpleSnackBar()) {\n      throw Error('Method cannot be used for snack-bar with custom content.');\n    }\n  }\n\n  /**\n   * Asserts that the current snack-bar does not use custom content and has\n   * an action defined. Otherwise the promise will reject.\n   */\n  private async _assertSimpleSnackBarWithAction(): Promise<void> {\n    await this._assertSimpleSnackBar();\n    if (!await this.hasAction()) {\n      throw Error('Method cannot be used for standard snack-bar without action.');\n    }\n  }\n\n  /** Whether the snack-bar is using the default content template. */\n  private async _isSimpleSnackBar(): Promise<boolean> {\n    return await this._simpleSnackBar() !== null;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {BaseHarnessFilters} from '@angular/cdk/testing';\n\n/** A set of criteria that can be used to filter a list of `MatSnackBarHarness` instances. */\nexport interface SnackBarHarnessFilters extends BaseHarnessFilters {}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './snack-bar-harness';\nexport * from './snack-bar-harness-filters';\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;AAAA;;;;;;;AAYA;AACA,MAAa,kBAAmB,SAAQ,gCAAwC;IAAhF;;QAMU,oBAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,CAAC;QAClE,8BAAyB,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QAC3D,2BAAsB,GAAG,IAAI,CAAC,UAAU,CAAC,6BAA6B,CAAC,CAAC;QACxE,gCAA2B,GAC/B,IAAI,CAAC,kBAAkB,CAAC,sCAAsC,CAAC,CAAC;KA0GrE;;;;;;;IAlGC,OAAO,IAAI,CAAC,UAAkC,EAAE;QAC9C,OAAO,IAAI,gBAAgB,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;KAC1D;;;;;;IAOK,OAAO;;YACX,OAAO,CAAC,MAAM,IAAI,CAAC,IAAI,EAAE,EAAE,YAAY,CAAC,MAAM,CAAmC,CAAC;SACnF;KAAA;;;;;IAMK,WAAW;;YACf,OAAO,CAAC,MAAM,IAAI,CAAC,yBAAyB,EAAE;iBACzC,YAAY,CAAC,WAAW,CAAgC,CAAC;SAC/D;KAAA;;;;IAKK,SAAS;;YACb,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;YACnC,OAAO,CAAC,MAAM,IAAI,CAAC,2BAA2B,EAAE,MAAM,IAAI,CAAC;SAC5D;KAAA;;;;;IAMK,oBAAoB;;YACxB,MAAM,IAAI,CAAC,+BAA+B,EAAE,CAAC;YAC7C,OAAO,CAAC,MAAM,IAAI,CAAC,2BAA2B,EAAE,EAAG,IAAI,EAAE,CAAC;SAC3D;KAAA;;;;;IAOK,iBAAiB;;YACrB,MAAM,IAAI,CAAC,+BAA+B,EAAE,CAAC;YAC7C,MAAM,CAAC,MAAM,IAAI,CAAC,2BAA2B,EAAE,EAAG,KAAK,EAAE,CAAC;SAC3D;KAAA;;;;IAKK,UAAU;;YACd,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;YACnC,OAAO,CAAC,MAAM,IAAI,CAAC,sBAAsB,EAAE,EAAE,IAAI,EAAE,CAAC;SACrD;KAAA;;IAGK,WAAW;;;;YAIf,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;YAC/B,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;;;gBAG3C,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;gBAC7B,IAAI,CAAC,aAAa,EAAE;aACrB,CAAC,CAAC;YAEH,OAAO,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;SAC5F;KAAA;;;;;IAMa,qBAAqB;;YACjC,IAAI,EAAC,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAA,EAAE;gBACnC,MAAM,KAAK,CAAC,0DAA0D,CAAC,CAAC;aACzE;SACF;KAAA;;;;;IAMa,+BAA+B;;YAC3C,MAAM,IAAI,CAAC,qBAAqB,EAAE,CAAC;YACnC,IAAI,EAAC,MAAM,IAAI,CAAC,SAAS,EAAE,CAAA,EAAE;gBAC3B,MAAM,KAAK,CAAC,8DAA8D,CAAC,CAAC;aAC7E;SACF;KAAA;;IAGa,iBAAiB;;YAC7B,OAAO,CAAA,MAAM,IAAI,CAAC,eAAe,EAAE,MAAK,IAAI,CAAC;SAC9C;KAAA;;;;;AA/GM,+BAAY,GAAG,0BAA0B,CAAC;;ACjBnD;;;;;;GAMG;;ACNH;;;;;;GAMG;;ACNH;;;;;;GAMG;;;;"}